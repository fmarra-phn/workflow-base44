import React, { useState, useEffect } from 'react';
import { User, Client, TeamMember } from '@/entities/all';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';
import { Skeleton } from '@/components/ui/skeleton';
import { Shield, User as UserIcon, Building, Mail, Briefcase } from 'lucide-react';
import { Badge } from '@/components/ui/badge';
import { Label } from '@/components/ui/label';

const roleConfig = {
    admin: { icon: Shield, color: 'bg-red-100 text-red-700' },
    team_member: { icon: UserIcon, color: 'bg-blue-100 text-blue-700' },
    client: { icon: Building, color: 'bg-green-100 text-green-700' }
};

export default function TeamMembers() {
    const [displayUsers, setDisplayUsers] = useState([]);
    const [teamMembers, setTeamMembers] = useState([]);
    const [clients, setClients] = useState([]);
    const [currentUser, setCurrentUser] = useState(null);
    const [isLoading, setIsLoading] = useState(true);

    useEffect(() => {
        loadData();
    }, []);

    const loadData = async () => {
        setIsLoading(true);
        try {
            const [userData, teamData, clientData, sessionUser] = await Promise.all([